# [资源中心](https://repo.harmonyos.com)定制发行版/特征模型 操作指导


## 1.下载开源发行版

共有两种下载方式：直接下载和定制下载。直接下载无需登录，不需裁剪组件下载；定制下载需登录“华为开发者联盟”账号，可裁剪部分或添加组件下载。

### 直接下载

步骤1：打开[资源中心](https://repo.harmonyos.com)门户查询开源发行版；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-01%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-01.png)

步骤2：点击查看开源发行版详情，确定该发行版符合业务场景后，点击“直接下载”后保存；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-01%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD-02.png)

### 定制下载

#### **设备组件裁剪**

步骤 1：打开[资源中心](https://repo.harmonyos.com)门户查询开源发行版；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-01%E8%AE%BE%E5%A4%87%E7%BB%84%E4%BB%B6%E8%A3%81%E5%89%AA-01.png)

步骤 2：点击查看"WLAN连接类产品"详情，确定该发行版符合业务场景后，点击“请登录后裁剪”；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-01%E8%AE%BE%E5%A4%87%E7%BB%84%E4%BB%B6%E8%A3%81%E5%89%AA-02_01.png)
![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-01%E8%AE%BE%E5%A4%87%E7%BB%84%E4%BB%B6%E8%A3%81%E5%89%AA-02_02.png)

步骤 3：登录完成后，点击“设备组件裁剪”，可定制组件添加或删除，填写项目信息后下载。

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-01%E8%AE%BE%E5%A4%87%E7%BB%84%E4%BB%B6%E8%A3%81%E5%89%AA-03_01.png)

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-01%E8%AE%BE%E5%A4%87%E7%BB%84%E4%BB%B6%E8%A3%81%E5%89%AA-03_02.png)

#### 定制发行版

步骤 1：打开[资源中心](https://repo.harmonyos.com)门户并登录华为账号，切换进入设备组件搜索页；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-01_01.png)

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-01_02.png)

步骤 2：(1)点击"定制发行版"，选择设备类型如："恒玄轻量级带屏类产品"特定类型，进入定制发行版页面；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-02_01.png)

步骤 2：(2)自动生成清单下默认查看全部部件，挑选配置业务所需特性，填写项目信息后下载；
![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-02_02.png)

步骤 2：(3)或者自动生成清单下筛选单个部件，挑选配置业务所需特性，填写项目信息后下载；
![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-02_03.png)

步骤 3：(1)退出"定制发行版"，选择设备类型如："轻量系统开源发行版"基础类型，进入定制发行版页面；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-03_01.png)

步骤 3：(2)自动生成清单下选择查看全部部件，挑选配置业务所需特性，填写项目信息后下载；

![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-03_02.png)

步骤 3：(3)用户添加清单下增加业务所需组件，填写项目信息后下载；
![image](../../imgs/HPM/01/1-%E4%B8%8B%E8%BD%BD%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E5%AE%9A%E5%88%B6%E4%B8%8B%E8%BD%BD-02%E5%AE%9A%E5%88%B6%E5%8F%91%E8%A1%8C%E7%89%88-03_03.png)



## 2.组织下特征建模

### 特征建模

步骤 1：打开[资源中心](https://repo.harmonyos.com)门户并登录华为账号，切换进入个人中心组织页；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01_02.png)

步骤 2：选择组织并切换模型页，新增模型基于模板如："轻量系统开源发行版"基础型，保存后去特征建模；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02_02.png)

步骤 3：选择当前创建的模型，点击进入特征建模页面；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-03.png)

步骤 4：(1)部件及特性清单下默认显示全部清单，挑选配置业务所需部件和特性，关联部件的运算逻辑；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-04_01.png)

步骤 4：(2)或者部件及特性清单下筛选单个部件，挑选配置业务所需的自定义部件；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-04_02_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-04_02_02.png)

步骤 4：(3)选择当前添加的部件，添加特性后关联部件的运算逻辑；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-04_03_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-04_03_02.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-04_03_03.png)

步骤5：切换配置环境变量菜单，添加配置环境变量，检查无误后退出特征建模。

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-05_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-01%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-05_02.png)

### 模型发布

步骤 1：退出特征建模后选择当前模型，操作栏下归档模型版本；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83-01_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83-01_02.png)

步骤 2：归档模型成功后选择当前模型，操作栏下发布模型版本；

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83-02_01.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83-02_02.png)

![image](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83-02_03.png)

步骤 3：等待模型审核通过，设备组件搜索页下选择当前已发布模型版本定制发行版，后续定制步骤略。

![](../../imgs/HPM/01/2-%E7%BB%84%E7%BB%87%E4%B8%8B%E7%89%B9%E5%BE%81%E5%BB%BA%E6%A8%A1-02%E6%A8%A1%E5%9E%8B%E5%8F%91%E5%B8%83-03.png)

## 3.发布开源发行版

目前只支持“企业服务开发者”创建组织，该组织申请通过官方认证后，组织成员具备发布开源发行版权限。

### 定义发行版组件

步骤 1：安装 Node.js 和 hpm-cli 命令行工具（详情请参考《[HPM Part开发指导](https://docs.openharmony.cn/pages/v3.1/zh-cn/device-dev/hpm-part/hpm-part-development.md/)》）

-   推荐安装 [Node.js](https://nodejs.org/) 12.x (包含 npm 6.14.4)或更高版本 (推荐 12.13.0+)
-   通过Node.js自带的npm安装hpm-cli命令行工具，打开CMD，执行以下命令：npm install -g @ohos/hpm-cli
-   安装完成后执行如下命令：hpm -V 或 hpm --version，显示hpm版本，即安装成功
-   如需升级hpm版本，请执行如下命令：npm update -g @ohos/hpm-cli

步骤 2：更改hpm的配置

-   安装完hpm-cli命令行工具后，执行以下命令可以查看hpm配置：hpm config

步骤 3：创建HarmonyOS组件

创建HarmonyOS组件有如下几种方式：

-   \- 开发一个全新的组件
-   \- 将现有的非组件的代码改造成组件
-   \- 使用 hpm-cli 提供的组件模板，快速创建组件

步骤 4：编译组件

-   完成代码开发后，需对组件进行编译。hpm-cli提供命令集成能力，可选择任意适合项目的编译工具（如 make，gcc，gn 等等）。只需在当前项目的 bundle.json 文件中定义 scripts 脚本中的 build 命令，就可以通过执行 hpm build 执行编译

步骤 5：定义发行版组件

-   发行版是将一组组件组合起来，编译生成可运行的 HarmonyOS 解决方案，里面包含了较多依赖组件以及以脚本形式描述如何完整编译、链接这些组件

步骤 6：发布发行版组件

-   在当前项目下，执行 hpm publish 命令发布发行版，待审核通过后即可生成开源发行版

![image](../../imgs/HPM/01/3-%E5%8F%91%E5%B8%83%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-01%E5%AE%9A%E4%B9%89%E5%8F%91%E8%A1%8C%E7%89%88%E7%BB%84%E4%BB%B6-06.png)

### 生成开源发行版

步骤 1：发行版组件审核通过，生成开源发行版

步骤 2：个人中心下资源菜单查看当前组件，点击“生成开源发行版”，填写相关信息后提交审核

![image](../../imgs/HPM/01/3-%E5%8F%91%E5%B8%83%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E7%94%9F%E6%88%90%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02.png)

步骤 3：审核通过后开源发行版即上架，可在“设备组件”页面搜索开源发行版并查看

![image](../../imgs/HPM/01/3-%E5%8F%91%E5%B8%83%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E7%94%9F%E6%88%90%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-03_01.png)

![image](../../imgs/HPM/01/3-%E5%8F%91%E5%B8%83%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-02%E7%94%9F%E6%88%90%E5%BC%80%E6%BA%90%E5%8F%91%E8%A1%8C%E7%89%88-03_02.png)


