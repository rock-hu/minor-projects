# Copyright (c) 2021 Huawei Device Co., Ltd.
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

import("//arkcompiler/ets_runtime/js_runtime_config.gni")
import("//arkcompiler/ets_runtime/test/test_helper.gni")

module_output_path = "arkcompiler/ets_runtime"

host_unittest_action("Builtins_BigInt_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_bigint_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Intl_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_intl_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_RelativeTimeFormat_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_relative_time_format_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Collator_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_collator_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_DateTimeFormat_First_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_date_time_format_first_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_DisPlayNames_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_displaynames_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Lazy_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_lazy_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_ListFormat_First_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_list_format_first_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Local_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_locale_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_NumberFormat_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_number_format_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_PluralRules_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_plural_rules_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_String_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_string_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_DateTimeFormat_Second_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_date_time_format_second_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_ListFormat_Second_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_list_format_second_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Segmenter_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_segmenter_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Array_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_array_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_ArrayBuffer_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_arraybuffer_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Atomics_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_atomics_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Boolean_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_boolean_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_DataView_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_dataview_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Data_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_date_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Errors_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_errors_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_FinalizationRegistry_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_finalization_registry_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Function_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_function_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Global_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_global_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Iterator_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_iterator_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Json_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_json_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Map_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_map_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Math_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_math_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Number_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_number_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Object_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_object_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Promise_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_promise_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Proxy_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_proxy_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Reflect_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_reflect_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Regexp_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_regexp_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Set_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_set_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
    "zlib:libz",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_StringIterator_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_string_iterator_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_Symbol_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_symbol_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_TypedArray_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_typedarray_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_WeakMap_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_weak_map_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_WeakRef_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_weak_ref_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Builtins_WeakSet_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_weak_set_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedArray_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_shared_array_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedArrayBuffer_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_sharedarraybuffer_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedTypedArray_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_shared_typedarray_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedSet_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_shared_set_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedMap_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_shared_map_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSendableArrayBuffer_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_sendable_arraybuffer_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedFunction_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_shared_function_test.cpp",
  ]

  configs = [ "../../../:ecma_test_config" ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

host_unittest_action("Sendable_BuiltinsSharedObject_Test") {
  module_out_path = module_output_path

  sources = [
    # test file
    "builtins_sharedobject_test.cpp",
  ]

  configs = [
    "../../../:ecma_test_config",
    "../../../:icu_path_test_config",
  ]

  deps = [ "../../../:libark_jsruntime_test" ]

  # hiviewdfx libraries
  external_deps = hiviewdfx_ext_deps
  external_deps += [
    "icu:shared_icui18n",
    "icu:shared_icuuc",
    "runtime_core:libarkassembler_static",
  ]
  deps += hiviewdfx_deps
}

group("unittest") {
  testonly = true

  # deps file
  deps = [
    ":Builtins_ArrayBuffer_Test",
    ":Builtins_Array_Test",
    ":Builtins_Atomics_Test",
    ":Builtins_BigInt_Test",
    ":Builtins_Boolean_Test",
    ":Builtins_Collator_Test",
    ":Builtins_DataView_Test",
    ":Builtins_Data_Test",
    ":Builtins_DateTimeFormat_First_Test",
    ":Builtins_DateTimeFormat_Second_Test",
    ":Builtins_DisPlayNames_Test",
    ":Builtins_Errors_Test",
    ":Builtins_FinalizationRegistry_Test",
    ":Builtins_Function_Test",
    ":Builtins_Global_Test",
    ":Builtins_Intl_Test",
    ":Builtins_Iterator_Test",
    ":Builtins_Json_Test",
    ":Builtins_Lazy_Test",
    ":Builtins_ListFormat_First_Test",
    ":Builtins_ListFormat_Second_Test",
    ":Builtins_Local_Test",
    ":Builtins_Map_Test",
    ":Builtins_Math_Test",
    ":Builtins_NumberFormat_Test",
    ":Builtins_Number_Test",
    ":Builtins_Object_Test",
    ":Builtins_PluralRules_Test",
    ":Builtins_Promise_Test",
    ":Builtins_Proxy_Test",
    ":Builtins_Reflect_Test",
    ":Builtins_Regexp_Test",
    ":Builtins_RelativeTimeFormat_Test",
    ":Builtins_Segmenter_Test",
    ":Builtins_Set_Test",
    ":Builtins_StringIterator_Test",
    ":Builtins_String_Test",
    ":Builtins_Symbol_Test",
    ":Builtins_TypedArray_Test",
    ":Builtins_WeakMap_Test",
    ":Builtins_WeakRef_Test",
    ":Builtins_WeakSet_Test",
    ":Sendable_BuiltinsSendableArrayBuffer_Test",
    ":Sendable_BuiltinsSharedArrayBuffer_Test",
    ":Sendable_BuiltinsSharedArray_Test",
    ":Sendable_BuiltinsSharedFunction_Test",
    ":Sendable_BuiltinsSharedMap_Test",
    ":Sendable_BuiltinsSharedObject_Test",
    ":Sendable_BuiltinsSharedSet_Test",
    ":Sendable_BuiltinsSharedTypedArray_Test",
  ]
}

group("host_unittest") {
  testonly = true

  # deps file
  deps = [
    ":Builtins_ArrayBuffer_TestAction",
    ":Builtins_Array_TestAction",
    ":Builtins_Atomics_TestAction",
    ":Builtins_BigInt_TestAction",
    ":Builtins_Boolean_TestAction",
    ":Builtins_Collator_TestAction",
    ":Builtins_DataView_TestAction",
    ":Builtins_Data_TestAction",
    ":Builtins_DateTimeFormat_First_TestAction",
    ":Builtins_DateTimeFormat_Second_TestAction",
    ":Builtins_DisPlayNames_TestAction",
    ":Builtins_Errors_TestAction",
    ":Builtins_FinalizationRegistry_TestAction",
    ":Builtins_Function_TestAction",
    ":Builtins_Global_TestAction",
    ":Builtins_Intl_TestAction",
    ":Builtins_Iterator_TestAction",
    ":Builtins_Json_TestAction",
    ":Builtins_Lazy_TestAction",
    ":Builtins_ListFormat_First_TestAction",
    ":Builtins_ListFormat_Second_TestAction",
    ":Builtins_Local_TestAction",
    ":Builtins_Map_TestAction",
    ":Builtins_Math_TestAction",
    ":Builtins_NumberFormat_TestAction",
    ":Builtins_Number_TestAction",
    ":Builtins_Object_TestAction",
    ":Builtins_PluralRules_TestAction",
    ":Builtins_Promise_TestAction",
    ":Builtins_Proxy_TestAction",
    ":Builtins_Reflect_TestAction",
    ":Builtins_Regexp_TestAction",
    ":Builtins_RelativeTimeFormat_TestAction",
    ":Builtins_Segmenter_TestAction",
    ":Builtins_Set_TestAction",
    ":Builtins_StringIterator_TestAction",
    ":Builtins_String_TestAction",
    ":Builtins_Symbol_TestAction",
    ":Builtins_TypedArray_TestAction",
    ":Builtins_WeakMap_TestAction",
    ":Builtins_WeakRef_TestAction",
    ":Builtins_WeakSet_TestAction",
    ":Sendable_BuiltinsSendableArrayBuffer_TestAction",
    ":Sendable_BuiltinsSharedArrayBuffer_TestAction",
    ":Sendable_BuiltinsSharedArray_TestAction",
    ":Sendable_BuiltinsSharedFunction_TestAction",
    ":Sendable_BuiltinsSharedMap_TestAction",
    ":Sendable_BuiltinsSharedObject_TestAction",
    ":Sendable_BuiltinsSharedSet_TestAction",
    ":Sendable_BuiltinsSharedTypedArray_TestAction",
  ]
  if (is_mac) {
    deps -= [
      ":Builtins_ArrayBuffer_TestAction",
      ":Builtins_Array_TestAction",
      ":Builtins_Atomics_TestAction",
      ":Builtins_BigInt_TestAction",
      ":Builtins_Boolean_TestAction",
      ":Builtins_Collator_TestAction",
      ":Builtins_DataView_TestAction",
      ":Builtins_Data_TestAction",
      ":Builtins_DateTimeFormat_First_TestAction",
      ":Builtins_DateTimeFormat_Second_TestAction",
      ":Builtins_DisPlayNames_TestAction",
      ":Builtins_Errors_TestAction",
      ":Builtins_FinalizationRegistry_TestAction",
      ":Builtins_Function_TestAction",
      ":Builtins_Global_TestAction",
      ":Builtins_Intl_TestAction",
      ":Builtins_Iterator_TestAction",
      ":Builtins_Json_TestAction",
      ":Builtins_Lazy_TestAction",
      ":Builtins_ListFormat_First_TestAction",
      ":Builtins_ListFormat_Second_TestAction",
      ":Builtins_Local_TestAction",
      ":Builtins_Map_TestAction",
      ":Builtins_Math_TestAction",
      ":Builtins_NumberFormat_TestAction",
      ":Builtins_Number_TestAction",
      ":Builtins_Object_TestAction",
      ":Builtins_PluralRules_TestAction",
      ":Builtins_Promise_TestAction",
      ":Builtins_Proxy_TestAction",
      ":Builtins_Reflect_TestAction",
      ":Builtins_Regexp_TestAction",
      ":Builtins_RelativeTimeFormat_TestAction",
      ":Builtins_Segmenter_TestAction",
      ":Builtins_Set_TestAction",
      ":Builtins_SharedObject__TestAction",
      ":Builtins_StringIterator_TestAction",
      ":Builtins_String_TestAction",
      ":Builtins_Symbol_TestAction",
      ":Builtins_TypedArray_TestAction",
      ":Builtins_WeakMap_TestAction",
      ":Builtins_WeakRef_TestAction",
      ":Builtins_WeakSet_TestAction",
      ":Sendable_BuiltinsSendableArrayBuffer_TestAction",
      ":Sendable_BuiltinsSharedArrayBuffer_TestAction",
      ":Sendable_BuiltinsSharedArray_TestAction",
      ":Sendable_BuiltinsSharedFunction_TestAction",
      ":Sendable_BuiltinsSharedMap_TestAction",
      ":Sendable_BuiltinsSharedObject_TestAction",
      ":Sendable_BuiltinsSharedSet_TestAction",
      ":Sendable_BuiltinsSharedTypedArray_TestAction",
    ]
  }
}
