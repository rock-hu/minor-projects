/*
 * Copyright (c) 2025 Huawei Device Co., Ltd.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

// Autogenerated file. DO NOT EDIT

package std.interop.js;

// NOTE(zhaoziming_hw): #IC8LO3 remove local declaration after Any type is supported
type Any = Object | null | undefined;

export final class InteropTransferHelper {
    private static native transferArrayBufferToStaticImpl(dynamicESValue: ESValue): ArrayBuffer;
    public static transferArrayBufferToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }
        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        return InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicESValue) as Object;
    }

    private static native transferArrayBufferToDynamicImpl(staticObject: ArrayBuffer): Any;
    public static transferArrayBufferToDynamic(staticObject: Object): Any {
        return InteropTransferHelper.transferArrayBufferToDynamicImpl(staticObject as ArrayBuffer);
    }

    private static native createDynamicTypedArray(buffer: ArrayBuffer, typedArrayType: int, length: double,
                                                  byteOffset: double): Any;

    private static native createDynamicDataView(buffer: ArrayBuffer, byteLength: double, byteOffset: double): Any;


    public static transferInt8ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Int8Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferInt8ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Int8Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            0,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferUint8ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Uint8Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferUint8ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Uint8Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            1,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferUint8ClampedArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Uint8ClampedArray(staticBuffer, byteOffset, length) as Object;
    }

    public static transferUint8ClampedArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Uint8ClampedArray;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            2,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferInt16ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Int16Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferInt16ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Int16Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            3,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferUint16ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Uint16Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferUint16ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Uint16Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            4,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferInt32ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Int32Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferInt32ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Int32Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            5,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferUint32ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Uint32Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferUint32ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Uint32Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            6,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferFloat32ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Float32Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferFloat32ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Float32Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            7,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferFloat64ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new Float64Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferFloat64ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as Float64Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            8,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferBigInt64ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new BigInt64Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferBigInt64ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as BigInt64Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            9,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferBigUint64ArrayToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let length = dynamicESValue.getProperty("length").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new BigUint64Array(staticBuffer, byteOffset, length) as Object;
    }

    public static transferBigUint64ArrayToDynamic(staticObject: Object): Any {
        let staticTypedArray = staticObject as BigUint64Array;

        let staticBuffer = staticTypedArray.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticTypedArray.byteOffset;
        let length = staticTypedArray.length;

        let dynamicTypedArray = InteropTransferHelper.createDynamicTypedArray(
            staticBuffer as ArrayBuffer,
            10,
            length,
            byteOffset
        );
        return dynamicTypedArray;
    }

    public static transferDataViewToStatic(dynamicObject: Any): Object {
        if (dynamicObject == null || dynamicObject == undefined) {
            throw new Error("dynamicObject is null or undefined");
        }

        let dynamicESValue = ESValue.wrap(__narrowAny<object>(dynamicObject));
        let dynamicBuffer = dynamicESValue.getProperty("buffer");
        let byteOffset = dynamicESValue.getProperty("byteOffset").toNumber();
        let byteLength = dynamicESValue.getProperty("byteLength").toNumber();

        let staticBuffer = InteropTransferHelper.transferArrayBufferToStaticImpl(dynamicBuffer);
        return new DataView(staticBuffer, byteOffset, byteLength) as Object;
    }

    public static transferDataViewToDynamic(staticObject: Object): Any {
        let staticDataView = staticObject as DataView;

        let staticBuffer = staticDataView.buffer;
        if(staticBuffer instanceof ArrayBuffer == false) {
            throw new Error("staticObject.buffer is not an instance of ArrayBuffer");
        }

        let byteOffset = staticDataView.byteOffset;
        let byteLength = staticDataView.byteLength;

        let dynamicDataView = InteropTransferHelper.createDynamicDataView(staticBuffer as ArrayBuffer, byteLength, byteOffset);
        return dynamicDataView;
    }
}